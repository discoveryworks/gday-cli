# gday-cli v1.6.1 - Sleep Duration Data Fix

Critical bug fix for Oura sleep duration accuracy.

## What's Fixed

### üêõ **Sleep Duration Calculation Bug**
**Before:** gday showed 9:28 sleep (time spent in bed)  
**After:** gday shows 8:03 sleep (actual sleep time)

- **Root cause**: Used `time_in_bed` instead of `total_sleep_duration` from Oura API
- **Impact**: 1h+ discrepancies between displayed and actual sleep time  
- **Fix**: Now uses Oura's precise sleep measurements that exclude awake periods

### üõ°Ô∏è **Test Coverage Added**
- Bug-specific prevention tests with exact values from the issue
- Data consistency validation to catch similar problems
- Comprehensive edge case protection

## Real-World Impact

Your sleep data is now accurate:
```
Old (wrong): "for a total of 9:28 sleep"  
New (right): "for a total of 8:03 sleep"
```

The difference represents awake time during the night that was incorrectly being counted as sleep.

## Migration Notes

- **No action needed** - fix applies automatically
- **No breaking changes** - all other functionality unchanged  
- Sleep duration display now matches Oura's official measurements

---

This patch ensures gday accurately reflects your actual sleep patterns rather than just time spent in bed.